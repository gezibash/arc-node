commit-msg:
  commands:
    commitlint:
      run: |
        msg=$(head -1 {1})
        if ! echo "$msg" | grep -qE '^(feat|fix|docs|style|refactor|perf|test|build|ci|chore|revert)(\(.+\))?: .{1,}$'; then
          echo "Invalid commit message format."
          echo "Expected: <type>(<scope>): <subject>"
          echo "Types: feat|fix|docs|style|refactor|perf|test|build|ci|chore|revert"
          echo "Got: $msg"
          exit 1
        fi

pre-commit:
  commands:
    gofmt:
      glob: "*.go"
      run: gofmt -w {staged_files} && git add {staged_files}
      stage_fixed: true
    golangci-lint:
      glob: "*.go"
      run: golangci-lint run ./...
    go-build:
      glob: "*.go"
      run: go build ./...
